<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta charset="UTF-8">
    <title>.Title</title>
    <style>
    </style>
</head>
<body>
<div class="top">
    <a href="/" class="href">Refresh</a>
</div>
<div class="content">
    <div class="logo">
{{/*        <img src="/statics/logo.png" alt="">*/}}
    </div>
    <div class="download">
<br>
<h3 id="counter">-1</h3>
<br>
<br>
            <input id="url" type="text" autocomplete="off" tabindex="1" value="test" autocapitalize="off">
            <input id="download" type="button" tabindex="2" value=".Download" onclick=download()>
            <input id="clear" type="button" tabindex="3" value="X">
    </div>
</div>
<div class="bottom">

</div>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script>
    function download() {
        var url = document.getElementById('url').value;
        console.log(url);
        external.invoke('download');
    }
</script>

<script>
    //检查浏览器是否支持WebSocket
    if(window.WebSocket){
        console.log('This browser supports WebSocket');
    }else{
        console.log('This browser does not supports WebSocket');
    };

    var WsUrl= {{.WsUrl}};
    var ws = new WebSocket(WsUrl);

    ws.onopen  = function (evt) {
        console.log("ws connect : "+WsUrl);
        ws.send("hello");
    };

    ws.onmessage = function (evt) {
        console.log("ws message: "+evt.data);
        // ws.close();
    };

    ws.onclose = function (evt) {
        console.log("ws close: "+evt);
    };

    ws.onerror = function (evt) {
        console.log("ws error: "+evt);
    }
</script>
</body>
</html>